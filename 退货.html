<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>售后管理</title>
    <link rel="stylesheet" href="css/base.css">
    <!-- <link rel="stylesheet" href="css/agent-service.css"> -->


</head>
<style>
    /* .wrap {
    width: 100%;
    background: white;
} */

    .nav_tab {
        width: 100%;
        height: 3rem;
        background: white;
        position: fixed;
        top: 0
    }

    .myTab {
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .myTab li {
        width: 33%;
        height: 100%;
        line-height: 3rem;
        text-align: center;
    }

    .myTab li span {
        width: 60%;
        font-size: 1.4rem;
        color: #868686;
        display: inline-block;
        height: 95%;
    }

    .active {
        border-bottom: 2px solid #000000;
        color: #333333 !important;
    }



    /* 订单发货 */
    .nav_one {
        margin-top: 3.1rem;
    }

    .order {
        padding: 0.75rem 1rem;
        margin-bottom: 0.5rem;
        background: white;
    }

    .order_left {
        display: flex;
        justify-content: space-between;
        font-size: 1.2rem;
        color: rgba(134, 134, 134, 1);
        margin-bottom: 1.5rem;
    }

    .order_name {
        font-size: 1.2rem;
        color: rgba(51, 51, 51, 1);
    }

    .order_btn {
        width: 5rem;
        height: 5rem;
        background: url(../img/添加.png)no-repeat;
        background-size: 100% 100%;
        position: fixed;
        bottom: 1rem;
        right: 1rem;
    }


    /* 退货管理 */
    .nav_two {
        margin: 4rem 0.8rem 0;
    }

    .refunds {
        width: 100%;
        background: white;
        margin-bottom: 0.5rem;
    }

    .refunds_uu li {
        border-bottom: 1px solid #f2f2f2;
        font-size: 1.4rem;
        color: rgba(51, 51, 51, 1);
    }

    .uu-box {
        display: flex;
        justify-content: space-between;
        align-items: center;
        line-height: 2.8rem;
        padding: 0 0.6rem;
    }

    .uu-three {
        padding: 0.75rem 1rem 0.5rem 0.55rem;
    }

    .uu-three h5 {
        font-size: 1.4rem;
        color: rgba(51, 51, 51, 1);
    }

    .uu-three p {
        font-size: 1.4rem;
        color: rgba(134, 134, 134, 1);
        margin: 1rem 0 1.3rem 1rem;
        line-height: 1.5rem;
    }

    .uu-img {
        display: flex;
        align-items: center;
        padding-left: 1.5rem;
    }

    .uu-img li img {
        width: 4.2rem;
        height: 4.2rem;
        border-radius: 4px;
        margin-right: 1rem;
    }

    .uu-for {
        padding: 0.65rem 1rem 0.5rem 0;
        text-align: right
    }

    .uu-for span {
        display: inline-block;
        width: 6rem;
        height: 2rem;
        background: rgba(0, 146, 255, 1);
        border-radius: 4px;
        text-align: center;
        line-height: 2rem;
        color: white;
        font-size: 1.2rem;
        margin: 0 0.4rem;
    }

    /* 拒绝退货 */
    .no-uu {
        padding: 0.75rem 1rem 1.2rem 0.55rem;
    }

    #noRefund {
        width: 100%;
        height: 6.2rem;
        background: rgba(248, 248, 248, 1);
        border-radius: 4px;
        margin: 1rem 0 1.5rem;
        outline: none;
        border: 0;
    }

    .no-uu p {
        display: block;
        width: 90%;
        height: 3.4rem;
        background: #0092ff;
        border-radius: 1.5rem;
        font-size: 1.5rem;
        color: #ffffff;
        text-align: center;
        line-height: 3.4rem;
        margin: 0 auto;
    }

    /* 弹框同意 */


    /* 弹框 */
    .shade {
        width: 100%;
        height: 100vh;
        background: rgba(0, 0, 0, .3);
        position: absolute;
        top: 0;
    }

    .box {
        width: 62%;
        background: #ffffff;
        box-shadow: 0px 0px 6px 3px rgba(144, 144, 144, 0.41);
        border-radius: 4px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
    }

    .box p:nth-child(1) {
        margin: 2.5rem 0 1.5rem 0;
        font-size: 1.5rem;
        color: #333333;
    }

    .box p:nth-child(2) {
        font-size: 1.2rem;
        color: rgba(134, 134, 134, 1);
        transform: scale(0.8);
    }

    .box_ul {
        display: flex;
        align-items: center;
        margin-top: 1.2rem;
        font-size: 1.5rem;
        color: rgba(51, 51, 51, 1);
        border-top: 1px solid #DEDEDE;
    }

    .box_ul li {
        width: 50%;
        text-align: center;
        padding: 0.5rem 0;
        line-height: 2.4rem;
    }

    .box_ul li span {
        display: inline-block;
        height: 100%;
        width: 100%;
    }

    .box_ul_no {
        border-right: 1px solid #DEDEDE;
    }


    /* 订单反馈 */
    .nav_three {
        padding: 4rem 0.8rem 0;
    }

    .order_feed {
        width: 96%;
        background: white;
        padding: 1rem 0.7rem 1rem 0.5rem;
    }

    .orderFeed_top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 1.4rem;
        color: #333333;
    }

    .orderFeed_text {
        font-size: 1.4rem;
        color: #868686;
        line-height: 1.5rem;
        margin: 1.5rem 0 1.2rem 0;
    }

    .feed_reply {
        display: block;
        width: 6rem;
        height: 2rem;
        background: rgba(0, 146, 255, 1);
        border-radius: 4px;
        text-align: center;
        line-height: 2rem;
        color: white;
        font-size: 1.2rem;
        float: right;
    }

    .feed_reply_one {
        display: block;
        width: 90%;
        height: 3.4rem;
        background: rgba(0, 146, 255, 1);
        text-align: center;
        line-height: 3.4rem;
        color: white;
        border-radius: 1.5rem;
        font-size: 1.5rem;
        margin: 0 auto;
    }

    .orderFeed_bot {
        width: 100%;
        padding: 0.8rem 0 0 0;
        border-top: 1px solid #f2f2f2;
        text-align: center;
    }

    .orderFeed_bot h5 {
        font-size: 1.4rem;
        color: #333333;
        text-align: left;
    }

    #feed-title {
        width: 91%;
        height: 5rem;
        background: rgba(248, 248, 248, 1);
        border-radius: 4px;
        padding: 0.7rem;
        margin: 0.85rem 0;
        outline: none;
        resize: none;
        border: 0;
    }
</style>

<body>
    <div id="app">
        <template>
            <div id="leftBar">
                <div class="part">
                    <div>产品：</div>
                    <div style="width: 87%;">
                        <!--"全部"是否选择，选择则展示class -->
                        <button id="product" :class="this.productSelected?'productStyle':'item'"
                            @click="selectProduct()">全部</button>
                        <button id="aProduct" class="productStyleHighLight" @click="selectAProducts()">A</button>
                        <button id="cProduct" class="productStyleHighLight" @click="selectCProducts()">C</button>
                        <br>
                        <input type="button" class="item" v-for="(aProduct,index) in A" :value="aProduct.value"
                            :key="aProduct.name" @click="selectAProduct(index)"
                            :class="aProduct.selected?'productStyle':''">
                        <br>
                        <input type="button" class="item" v-for="(cProduct,index) in C" @click="selectCProduct(index)"
                            :value="cProduct.value" :key="cProduct.name" :class="cProduct.selected?'productStyle':''">
                        <br>
                        <input type="button" class="item" v-for="(eProduct,index) in elseProduct"
                            @click="selectEProduct(index)" :value="eProduct.value" :key="eProduct.name"
                            :class="eProduct.selected?'productStyle':''">
                    </div>
                </div>
            </div>
        </template>

    </div>




</body>

</html>
<script src="js/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/layer/2.3/layer.js"></script>
<script src="js/api.js"></script>
<script src="js/vue.js"></script>
<!-- <script src="js/agent-service.js"></script> -->
<script>

    var xm = new Vue({
        el: "#app",
        data() {
            return {
                //产品 “全部”是否被选中
                productSelected: true,
                //产品集合
                productMap: new Map(),
                //A类产品
                A: [
                    {
                        name: 'apple',
                        value: '苹果',
                        selected: false
                    },
                    {
                        name: 'banana',
                        value: '香蕉',
                        selected: false
                    },
                    {
                        name: 'orange',
                        value: '橘子',
                        selected: false
                    },
                    {
                        name: 'watermelon',
                        value: '西瓜',
                        selected: false
                    }],
                //C类产品
                C: [
                    {
                        name: 'milk',
                        value: '牛奶',
                        selected: false
                    },
                    {
                        name: 'Bread',
                        value: '面包',
                        selected: false
                    },
                    {
                        name: 'salt',
                        value: '盐',
                        selected: false
                    },
                    {
                        name: 'wheat',
                        value: '小麦',
                        selected: false
                    },
                    {
                        name: 'rice',
                        value: '大米',
                        selected: false
                    },
                    {
                        name: 'soy',
                        value: '酱油',
                        selected: false
                    }],
                //其他类产品
                elseProduct: [
                    {
                        name: 'else',
                        value: '其他',
                        selected: false
                    }],
            }
        },
        methods: {
            //点击全部产品
            selectProduct: function () {
                this.productSelected = true;
                //取消产品的选中
                this.A.forEach(function (r) {
                    r.selected = false;
                });
                this.C.forEach(function (c) {
                    c.selected = false;
                });
                this.elseProduct.forEach(function (e) {
                    e.selected = false;
                });
                //整合数据
                this.mergeCondition();
            }
        },
        //点击A
        selectAProducts: function () {
            this.productSelected = false;
            //清理数据，包括productMap中的数据，以及将所有产品的选中状态取消
            this.clearProductMap();
            var productMap2 = this.productMap;
            this.A.forEach(function (a) {
                a.selected = true;
                productMap2.set(a.name, a.value)
            });
            // this.productMap = productMap2;
            //整合数据
            this.mergeCondition();
        },
        //点击C
        selectCProducts: function () {
            this.productSelected = false;
            //清理数据，包括productMap中的数据，以及将所有产品的选中状态取消
            this.clearProductMap();
            var productMap2 = this.productMap;
            this.C.forEach(function (c) {
                c.selected = true;
                productMap2.set(c.name, c.value)
            });
            this.productMap = productMap2;
            //整合数据
            this.mergeCondition();
        },

        //A类产品被点击时
        selectAProduct: function (index) {
            this.A[index].selected = !this.A[index].selected;
            if (this.A[index].selected) {
                //点击时，若刚开始是全部状态，则删除全部数据，只添加点击的那个
                if (this.productSelected) {
                    this.productMap.clear();
                }
                this.productMap.set(this.A[index].name, this.A[index].value);
                //有其他产品选中，取消"全部"的选中效果
                this.productSelected = false;
            } else {
                this.productMap.delete(this.A[index].name);
            }
            //整合数据
            this.mergeCondition();
        },
        //C类产品被点击时
        selectCProduct: function (index) {
            this.C[index].selected = !this.C[index].selected;
            //若是选中状态
            if (this.C[index].selected) {
                //点击时，若刚开始是全部状态，则删除全部数据，只添加点击的那个
                if (this.productSelected) {
                    this.productMap.clear();
                }
                this.productMap.set(this.C[index].name, this.C[index].value)
                this.productSelected = false;
                //全部的那一个按钮选中
            } else {
                this.productMap.delete(this.C[index].name);
            }
            //整合数据
            this.mergeCondition();
        },
        //else类产品被点击时
        selectEProduct: function (index) {
            this.elseProduct[index].selected = !this.elseProduct[index].selected;
            if (this.elseProduct[index].selected) {
                //点击时，若刚开始是全部状态，则删除全部数据，只添加点击的那个
                if (this.productSelected) {
                    this.productMap.clear();
                }
                this.productMap.set(this.elseProduct[index].name, this.elseProduct[index].value);
                this.productSelected = false;
            }
            else {
                // this.productSelected=false;
                this.productMap.delete(this.elseProduct[index].name);
            }
            //整合数据
            this.mergeCondition();
        },

        //清除数据
        clearProductMap: function () {
            // if(this.productSelected){
            //清空productMap数据
            this.productMap.clear();
            // }
            //取消选中
            this.A.forEach(function (r) {
                r.selected = false;
            });
            this.C.forEach(function (c) {
                c.selected = false;
            });
            this.elseProduct.forEach(function (e) {
                e.selected = false;
            });
        },
        mergeCondition: function () {
            //如果有的为空，则将“全部”置为true
            if (this.productMap.size === 0) {
                this.productSelected = true;
            }
            //防止不点击的时候没有数据
            //如果"产品"被选中，则将所有产品放入map
            if (this.productSelected) {
                var productMap2 = this.productMap;
                this.R.forEach(function (rProduct) {
                    productMap2.set(rProduct.name, rProduct.value)
                });
                this.C.forEach(function (cProduct) {
                    productMap2.set(cProduct.name, cProduct.value)
                });

                this.elseProduct.forEach(function (eProduct) {
                    productMap2.set(eProduct.name, eProduct.value);
                });//否则就将在前面组装好的map发给后台
                //发送请求
                console.log(this.productMap)
            }
        }
    });
</script>